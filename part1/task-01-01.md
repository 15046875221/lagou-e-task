当js代码运行时，从上到下，同步代码直接输出，异步代码入栈，微任务如promise进栈后，当同步代码执行完毕，按照入栈顺序执行微任务，宏任务如setTimeout进棧后，在当前宏任务所有微任务执行完毕后，按数序执行。